# Comparison Report Examples

This document provides examples of comparison reports generated by the Codebase Analysis Viewer.

## Overview

The Codebase Analysis Viewer can generate detailed comparison reports between two codebases. These reports highlight differences in structure, quality, dependencies, and other metrics. This document provides examples of comparison reports for different scenarios.

## Example 1: Comparing Different Versions of a Project

This example shows a comparison between version 1.0 and version 2.0 of a project.

```json
{
  "metadata": {
    "base_repo_name": "username/project",
    "base_branch": "v1.0",
    "compare_repo_name": "username/project",
    "compare_branch": "v2.0",
    "comparison_time": "2025-05-10T23:59:23",
    "language": "python"
  },
  "categories": {
    "codebase_structure": {
      "file_count": {
        "base": 42,
        "compare": 50,
        "difference": 8,
        "percent_change": 19.05
      },
      "files_by_language": {
        "python": {
          "base": 35,
          "compare": 42,
          "difference": 7,
          "percent_change": 20.0
        },
        "markdown": {
          "base": 5,
          "compare": 6,
          "difference": 1,
          "percent_change": 20.0
        },
        "yaml": {
          "base": 2,
          "compare": 2,
          "difference": 0,
          "percent_change": 0.0
        }
      },
      "symbol_count": {
        "base": 156,
        "compare": 185,
        "difference": 29,
        "percent_change": 18.59
      },
      "new_files": [
        "src/new_feature.py",
        "src/utils/helper.py",
        "tests/test_new_feature.py",
        "docs/new_feature.md"
      ],
      "removed_files": [],
      "modified_files": [
        {
          "name": "src/main.py",
          "change_percentage": 15.3
        },
        {
          "name": "src/utils.py",
          "change_percentage": 8.7
        }
      ]
    },
    "code_quality": {
      "cyclomatic_complexity": {
        "avg_complexity": {
          "base": 3.2,
          "compare": 2.9,
          "difference": -0.3,
          "percent_change": -9.38
        },
        "max_complexity": {
          "base": 12,
          "compare": 10,
          "difference": -2,
          "percent_change": -16.67
        }
      },
      "function_size_metrics": {
        "avg_function_length": {
          "base": 15.3,
          "compare": 12.8,
          "difference": -2.5,
          "percent_change": -16.34
        },
        "max_function_length": {
          "base": 100,
          "compare": 80,
          "difference": -20,
          "percent_change": -20.0
        }
      },
      "new_unused_functions": [],
      "removed_unused_functions": [
        {
          "name": "deprecated_function",
          "file": "src/utils.py"
        }
      ]
    },
    "dependency_flow": {
      "function_call_relationships": {
        "new_relationships": [
          {
            "caller": "main",
            "callee": "new_feature"
          },
          {
            "caller": "new_feature",
            "callee": "helper"
          }
        ],
        "removed_relationships": [
          {
            "caller": "main",
            "callee": "deprecated_function"
          }
        ]
      },
      "entry_point_analysis": {
        "new_entry_points": [
          {
            "name": "new_feature_cli",
            "file": "src/new_feature.py"
          }
        ],
        "removed_entry_points": []
      }
    }
  },
  "summary": {
    "key_findings": [
      "Added 8 new files (19.05% increase)",
      "Added 29 new symbols (18.59% increase)",
      "Reduced average cyclomatic complexity by 9.38%",
      "Reduced average function length by 16.34%",
      "Removed 1 unused function",
      "Added 1 new entry point"
    ],
    "conclusion": "Version 2.0 adds significant new functionality while improving code quality metrics. The codebase has grown in size but has become more maintainable with reduced complexity and function size."
  }
}
```

### Interpretation

This comparison report shows that version 2.0 of the project has:
- Added 8 new files (19.05% increase)
- Added 29 new symbols (18.59% increase)
- Reduced average cyclomatic complexity by 9.38%
- Reduced average function length by 16.34%
- Removed 1 unused function
- Added 1 new entry point

The report indicates that version 2.0 adds significant new functionality while improving code quality metrics. The codebase has grown in size but has become more maintainable with reduced complexity and function size.

## Example 2: Comparing a Feature Branch with Main

This example shows a comparison between a feature branch and the main branch of a project.

```json
{
  "metadata": {
    "base_repo_name": "username/project",
    "base_branch": "main",
    "compare_repo_name": "username/project",
    "compare_branch": "feature-branch",
    "comparison_time": "2025-05-10T23:59:23",
    "language": "javascript"
  },
  "categories": {
    "codebase_structure": {
      "file_count": {
        "base": 35,
        "compare": 38,
        "difference": 3,
        "percent_change": 8.57
      },
      "files_by_language": {
        "javascript": {
          "base": 25,
          "compare": 27,
          "difference": 2,
          "percent_change": 8.0
        },
        "jsx": {
          "base": 5,
          "compare": 6,
          "difference": 1,
          "percent_change": 20.0
        },
        "json": {
          "base": 3,
          "compare": 3,
          "difference": 0,
          "percent_change": 0.0
        },
        "markdown": {
          "base": 2,
          "compare": 2,
          "difference": 0,
          "percent_change": 0.0
        }
      },
      "symbol_count": {
        "base": 120,
        "compare": 132,
        "difference": 12,
        "percent_change": 10.0
      },
      "new_files": [
        "src/components/NewFeature.jsx",
        "src/utils/featureHelpers.js",
        "tests/NewFeature.test.js"
      ],
      "removed_files": [],
      "modified_files": [
        {
          "name": "src/App.jsx",
          "change_percentage": 12.5
        },
        {
          "name": "src/utils/index.js",
          "change_percentage": 5.2
        }
      ]
    },
    "code_quality": {
      "cyclomatic_complexity": {
        "avg_complexity": {
          "base": 2.8,
          "compare": 2.9,
          "difference": 0.1,
          "percent_change": 3.57
        },
        "max_complexity": {
          "base": 8,
          "compare": 9,
          "difference": 1,
          "percent_change": 12.5
        }
      },
      "function_size_metrics": {
        "avg_function_length": {
          "base": 10.5,
          "compare": 10.8,
          "difference": 0.3,
          "percent_change": 2.86
        },
        "max_function_length": {
          "base": 50,
          "compare": 55,
          "difference": 5,
          "percent_change": 10.0
        }
      },
      "new_unused_functions": [
        {
          "name": "debugHelper",
          "file": "src/utils/featureHelpers.js"
        }
      ],
      "removed_unused_functions": []
    },
    "language_specific": {
      "jsx_tsx_component_analysis": {
        "total_components": {
          "base": 15,
          "compare": 16,
          "difference": 1,
          "percent_change": 6.67
        },
        "functional_components": {
          "base": 12,
          "compare": 13,
          "difference": 1,
          "percent_change": 8.33
        },
        "class_components": {
          "base": 3,
          "compare": 3,
          "difference": 0,
          "percent_change": 0.0
        },
        "components_with_hooks": {
          "base": 10,
          "compare": 11,
          "difference": 1,
          "percent_change": 10.0
        }
      }
    }
  },
  "summary": {
    "key_findings": [
      "Added 3 new files (8.57% increase)",
      "Added 12 new symbols (10.0% increase)",
      "Slight increase in average cyclomatic complexity (3.57%)",
      "Slight increase in average function length (2.86%)",
      "Added 1 unused function",
      "Added 1 new React component"
    ],
    "conclusion": "The feature branch adds a new React component with supporting utilities. There is a slight increase in complexity metrics, but the changes are relatively small. One unused function was detected that should be addressed before merging."
  }
}
```

### Interpretation

This comparison report shows that the feature branch has:
- Added 3 new files (8.57% increase)
- Added 12 new symbols (10.0% increase)
- Slight increase in average cyclomatic complexity (3.57%)
- Slight increase in average function length (2.86%)
- Added 1 unused function
- Added 1 new React component

The report indicates that the feature branch adds a new React component with supporting utilities. There is a slight increase in complexity metrics, but the changes are relatively small. One unused function was detected that should be addressed before merging.

## Example 3: Comparing Before and After Refactoring

This example shows a comparison between before and after a major refactoring of a project.

```json
{
  "metadata": {
    "base_repo_name": "username/project",
    "base_branch": "before-refactor",
    "compare_repo_name": "username/project",
    "compare_branch": "after-refactor",
    "comparison_time": "2025-05-10T23:59:23",
    "language": "python"
  },
  "categories": {
    "codebase_structure": {
      "file_count": {
        "base": 30,
        "compare": 35,
        "difference": 5,
        "percent_change": 16.67
      },
      "files_by_language": {
        "python": {
          "base": 25,
          "compare": 30,
          "difference": 5,
          "percent_change": 20.0
        },
        "markdown": {
          "base": 3,
          "compare": 3,
          "difference": 0,
          "percent_change": 0.0
        },
        "yaml": {
          "base": 2,
          "compare": 2,
          "difference": 0,
          "percent_change": 0.0
        }
      },
      "symbol_count": {
        "base": 120,
        "compare": 135,
        "difference": 15,
        "percent_change": 12.5
      },
      "new_files": [
        "src/models/user.py",
        "src/models/product.py",
        "src/services/user_service.py",
        "src/services/product_service.py",
        "src/utils/validators.py"
      ],
      "removed_files": [
        "src/models.py",
        "src/services.py"
      ],
      "modified_files": [
        {
          "name": "src/main.py",
          "change_percentage": 25.3
        },
        {
          "name": "src/utils.py",
          "change_percentage": 18.7
        }
      ],
      "module_coupling_metrics": {
        "avg_coupling": {
          "base": 4.2,
          "compare": 2.8,
          "difference": -1.4,
          "percent_change": -33.33
        },
        "max_coupling": {
          "base": 10,
          "compare": 6,
          "difference": -4,
          "percent_change": -40.0
        }
      },
      "module_cohesion_analysis": {
        "avg_cohesion": {
          "base": 0.6,
          "compare": 0.8,
          "difference": 0.2,
          "percent_change": 33.33
        },
        "min_cohesion": {
          "base": 0.3,
          "compare": 0.5,
          "difference": 0.2,
          "percent_change": 66.67
        }
      }
    },
    "code_quality": {
      "cyclomatic_complexity": {
        "avg_complexity": {
          "base": 4.5,
          "compare": 2.8,
          "difference": -1.7,
          "percent_change": -37.78
        },
        "max_complexity": {
          "base": 15,
          "compare": 8,
          "difference": -7,
          "percent_change": -46.67
        }
      },
      "function_size_metrics": {
        "avg_function_length": {
          "base": 25.3,
          "compare": 12.8,
          "difference": -12.5,
          "percent_change": -49.41
        },
        "max_function_length": {
          "base": 120,
          "compare": 50,
          "difference": -70,
          "percent_change": -58.33
        }
      },
      "nesting_depth_analysis": {
        "avg_max_nesting": {
          "base": 3.5,
          "compare": 2.2,
          "difference": -1.3,
          "percent_change": -37.14
        },
        "max_nesting": {
          "base": 6,
          "compare": 4,
          "difference": -2,
          "percent_change": -33.33
        }
      },
      "new_unused_functions": [],
      "removed_unused_functions": [
        {
          "name": "unused_helper",
          "file": "src/utils.py"
        },
        {
          "name": "deprecated_function",
          "file": "src/models.py"
        }
      ]
    },
    "dependency_flow": {
      "function_call_relationships": {
        "new_relationships": [
          {
            "caller": "main",
            "callee": "user_service.get_user"
          },
          {
            "caller": "main",
            "callee": "product_service.get_product"
          }
        ],
        "removed_relationships": [
          {
            "caller": "main",
            "callee": "get_user"
          },
          {
            "caller": "main",
            "callee": "get_product"
          }
        ]
      },
      "circular_imports": {
        "base": [
          ["src/models.py", "src/services.py", "src/models.py"]
        ],
        "compare": [],
        "resolved": [
          ["src/models.py", "src/services.py", "src/models.py"]
        ],
        "new": []
      }
    }
  },
  "summary": {
    "key_findings": [
      "Reorganized code into more files (+5 new files, -2 removed files)",
      "Reduced average cyclomatic complexity by 37.78%",
      "Reduced average function length by 49.41%",
      "Reduced maximum nesting depth by 33.33%",
      "Improved module cohesion by 33.33%",
      "Reduced module coupling by 33.33%",
      "Resolved 1 circular import dependency",
      "Removed 2 unused functions"
    ],
    "conclusion": "The refactoring has significantly improved code quality and maintainability. The code is now better organized with smaller, less complex functions, improved cohesion, reduced coupling, and resolved circular dependencies."
  }
}
```

### Interpretation

This comparison report shows that after the refactoring:
- The code has been reorganized into more files (+5 new files, -2 removed files)
- Average cyclomatic complexity has been reduced by 37.78%
- Average function length has been reduced by 49.41%
- Maximum nesting depth has been reduced by 33.33%
- Module cohesion has improved by 33.33%
- Module coupling has been reduced by 33.33%
- 1 circular import dependency has been resolved
- 2 unused functions have been removed

The report indicates that the refactoring has significantly improved code quality and maintainability. The code is now better organized with smaller, less complex functions, improved cohesion, reduced coupling, and resolved circular dependencies.

## Example 4: Comparing Similar Projects with Different Implementations

This example shows a comparison between two similar projects with different implementations.

```json
{
  "metadata": {
    "base_repo_name": "username/project1",
    "compare_repo_name": "username/project2",
    "comparison_time": "2025-05-10T23:59:23",
    "language": "java"
  },
  "categories": {
    "codebase_structure": {
      "file_count": {
        "base": 45,
        "compare": 38,
        "difference": -7,
        "percent_change": -15.56
      },
      "files_by_language": {
        "java": {
          "base": 40,
          "compare": 35,
          "difference": -5,
          "percent_change": -12.5
        },
        "xml": {
          "base": 3,
          "compare": 2,
          "difference": -1,
          "percent_change": -33.33
        },
        "markdown": {
          "base": 2,
          "compare": 1,
          "difference": -1,
          "percent_change": -50.0
        }
      },
      "symbol_count": {
        "base": 180,
        "compare": 150,
        "difference": -30,
        "percent_change": -16.67
      },
      "module_coupling_metrics": {
        "avg_coupling": {
          "base": 3.8,
          "compare": 2.5,
          "difference": -1.3,
          "percent_change": -34.21
        },
        "max_coupling": {
          "base": 8,
          "compare": 5,
          "difference": -3,
          "percent_change": -37.5
        }
      },
      "module_cohesion_analysis": {
        "avg_cohesion": {
          "base": 0.65,
          "compare": 0.78,
          "difference": 0.13,
          "percent_change": 20.0
        },
        "min_cohesion": {
          "base": 0.4,
          "compare": 0.6,
          "difference": 0.2,
          "percent_change": 50.0
        }
      },
      "package_structure": {
        "base": {
          "depth": 4,
          "width": 6,
          "avg_classes_per_package": 5.2
        },
        "compare": {
          "depth": 3,
          "width": 5,
          "avg_classes_per_package": 6.3
        },
        "difference": {
          "depth": -1,
          "width": -1,
          "avg_classes_per_package": 1.1
        }
      }
    },
    "code_quality": {
      "cyclomatic_complexity": {
        "avg_complexity": {
          "base": 3.5,
          "compare": 2.8,
          "difference": -0.7,
          "percent_change": -20.0
        },
        "max_complexity": {
          "base": 12,
          "compare": 9,
          "difference": -3,
          "percent_change": -25.0
        }
      },
      "function_size_metrics": {
        "avg_function_length": {
          "base": 18.5,
          "compare": 15.2,
          "difference": -3.3,
          "percent_change": -17.84
        },
        "max_function_length": {
          "base": 80,
          "compare": 60,
          "difference": -20,
          "percent_change": -25.0
        }
      },
      "nesting_depth_analysis": {
        "avg_max_nesting": {
          "base": 3.2,
          "compare": 2.5,
          "difference": -0.7,
          "percent_change": -21.88
        },
        "max_nesting": {
          "base": 5,
          "compare": 4,
          "difference": -1,
          "percent_change": -20.0
        }
      }
    },
    "language_specific": {
      "inheritance_hierarchy": {
        "max_inheritance_depth": {
          "base": 5,
          "compare": 3,
          "difference": -2,
          "percent_change": -40.0
        },
        "avg_inheritance_depth": {
          "base": 2.8,
          "compare": 1.9,
          "difference": -0.9,
          "percent_change": -32.14
        }
      },
      "interface_implementation_verification": {
        "total_interfaces": {
          "base": 15,
          "compare": 20,
          "difference": 5,
          "percent_change": 33.33
        },
        "implemented_interfaces": {
          "base": 12,
          "compare": 18,
          "difference": 6,
          "percent_change": 50.0
        }
      }
    },
    "code_metrics": {
      "maintainability_index": {
        "avg_maintainability": {
          "base": 68.5,
          "compare": 75.2,
          "difference": 6.7,
          "percent_change": 9.78
        },
        "min_maintainability": {
          "base": 45.2,
          "compare": 55.8,
          "difference": 10.6,
          "percent_change": 23.45
        }
      }
    }
  },
  "summary": {
    "key_findings": [
      "Project 2 has 15.56% fewer files than Project 1",
      "Project 2 has 16.67% fewer symbols than Project 1",
      "Project 2 has 34.21% less module coupling than Project 1",
      "Project 2 has 20.0% better module cohesion than Project 1",
      "Project 2 has 20.0% lower average cyclomatic complexity than Project 1",
      "Project 2 has 17.84% shorter average function length than Project 1",
      "Project 2 has 40.0% shallower inheritance hierarchy than Project 1",
      "Project 2 uses 33.33% more interfaces than Project 1",
      "Project 2 has 9.78% better maintainability index than Project 1"
    ],
    "conclusion": "Project 2 appears to have a more maintainable codebase than Project 1. It has fewer files and symbols, less coupling, better cohesion, lower complexity, shorter functions, shallower inheritance hierarchy, and makes better use of interfaces. These factors contribute to its higher maintainability index."
  }
}
```

### Interpretation

This comparison report shows that compared to Project 1, Project 2 has:
- 15.56% fewer files
- 16.67% fewer symbols
- 34.21% less module coupling
- 20.0% better module cohesion
- 20.0% lower average cyclomatic complexity
- 17.84% shorter average function length
- 40.0% shallower inheritance hierarchy
- 33.33% more interfaces
- 9.78% better maintainability index

The report indicates that Project 2 appears to have a more maintainable codebase than Project 1. It has fewer files and symbols, less coupling, better cohesion, lower complexity, shorter functions, shallower inheritance hierarchy, and makes better use of interfaces. These factors contribute to its higher maintainability index.

## Example 5: Comparing a Fork with the Original Repository

This example shows a comparison between a fork and the original repository.

```json
{
  "metadata": {
    "base_repo_name": "original/repo",
    "compare_repo_name": "fork/repo",
    "comparison_time": "2025-05-10T23:59:23",
    "language": "python"
  },
  "categories": {
    "codebase_structure": {
      "file_count": {
        "base": 50,
        "compare": 55,
        "difference": 5,
        "percent_change": 10.0
      },
      "files_by_language": {
        "python": {
          "base": 40,
          "compare": 44,
          "difference": 4,
          "percent_change": 10.0
        },
        "markdown": {
          "base": 8,
          "compare": 9,
          "difference": 1,
          "percent_change": 12.5
        },
        "yaml": {
          "base": 2,
          "compare": 2,
          "difference": 0,
          "percent_change": 0.0
        }
      },
      "symbol_count": {
        "base": 200,
        "compare": 220,
        "difference": 20,
        "percent_change": 10.0
      },
      "new_files": [
        "src/custom_feature.py",
        "src/utils/custom_helpers.py",
        "tests/test_custom_feature.py",
        "docs/custom_feature.md",
        "examples/custom_feature_example.py"
      ],
      "removed_files": [],
      "modified_files": [
        {
          "name": "src/main.py",
          "change_percentage": 5.3
        },
        {
          "name": "src/utils.py",
          "change_percentage": 8.7
        },
        {
          "name": "README.md",
          "change_percentage": 15.2
        }
      ]
    },
    "code_quality": {
      "cyclomatic_complexity": {
        "avg_complexity": {
          "base": 3.0,
          "compare": 3.1,
          "difference": 0.1,
          "percent_change": 3.33
        },
        "max_complexity": {
          "base": 10,
          "compare": 11,
          "difference": 1,
          "percent_change": 10.0
        }
      },
      "function_size_metrics": {
        "avg_function_length": {
          "base": 15.0,
          "compare": 15.5,
          "difference": 0.5,
          "percent_change": 3.33
        },
        "max_function_length": {
          "base": 80,
          "compare": 85,
          "difference": 5,
          "percent_change": 6.25
        }
      }
    },
    "dependency_flow": {
      "function_call_relationships": {
        "new_relationships": [
          {
            "caller": "main",
            "callee": "custom_feature"
          },
          {
            "caller": "custom_feature",
            "callee": "custom_helpers.process_data"
          }
        ],
        "removed_relationships": []
      },
      "entry_point_analysis": {
        "new_entry_points": [
          {
            "name": "custom_feature_cli",
            "file": "src/custom_feature.py"
          }
        ],
        "removed_entry_points": []
      }
    },
    "language_specific": {
      "decorator_usage_analysis": {
        "decorator_counts": {
          "base": {
            "@property": 12,
            "@staticmethod": 8,
            "@classmethod": 6
          },
          "compare": {
            "@property": 14,
            "@staticmethod": 9,
            "@classmethod": 6,
            "@custom_decorator": 3
          },
          "new_decorators": ["@custom_decorator"]
        }
      },
      "type_hint_coverage": {
        "coverage_percentage": {
          "base": 75.0,
          "compare": 80.0,
          "difference": 5.0,
          "percent_change": 6.67
        }
      }
    }
  },
  "summary": {
    "key_findings": [
      "Fork added 5 new files (10.0% increase)",
      "Fork added 20 new symbols (10.0% increase)",
      "Fork added a custom feature with supporting utilities",
      "Fork added a new entry point for the custom feature",
      "Fork introduced a new custom decorator",
      "Fork improved type hint coverage by 6.67%",
      "Fork has slightly higher complexity metrics (3.33% increase in average complexity)"
    ],
    "conclusion": "The fork has extended the original repository with a custom feature and supporting utilities. The changes are well-contained and have minimal impact on the existing codebase. The fork has also improved type hint coverage while maintaining similar code quality metrics."
  }
}
```

### Interpretation

This comparison report shows that compared to the original repository, the fork has:
- Added 5 new files (10.0% increase)
- Added 20 new symbols (10.0% increase)
- Added a custom feature with supporting utilities
- Added a new entry point for the custom feature
- Introduced a new custom decorator
- Improved type hint coverage by 6.67%
- Slightly higher complexity metrics (3.33% increase in average complexity)

The report indicates that the fork has extended the original repository with a custom feature and supporting utilities. The changes are well-contained and have minimal impact on the existing codebase. The fork has also improved type hint coverage while maintaining similar code quality metrics.

## Conclusion

These examples demonstrate the types of comparison reports that can be generated by the Codebase Analysis Viewer. By comparing codebases, you can gain valuable insights into code evolution, different implementation approaches, and the impact of refactoring.

The comparison reports provide detailed metrics across multiple categories, allowing you to understand the differences between codebases at a granular level. The summary section highlights key findings and provides a conclusion to help you quickly understand the most important differences.

